<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">

    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="" content="">
    <meta name="keywords" content="">
    <meta name="" content="">
    <link rel="icon" type="image/png" href="images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="images/favicon-16x16.png" sizes="16x16">

    <script src="https://aframe.io/releases/0.3.2/aframe.min.js"></script>
    <script src="https://npmcdn.com/aframe-event-set-component@3.0.1"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>


  </head>
  <body>

    <a-scene>
    <!--360img-->
      <a-sky data-array-link-id="rot" data-array="room" src="https://binghan07.github.io/test_vr/iStock-864710938.jpg" visible="true" rotation="0 -200 0"></a-sky>
      

    <!--中心點擊區-->
      <a-entity>
        <a-entity id="camera" camera="" position="10 1 5" look-controls="" mouse-cursor="">
          <a-cursor id="cursor" cursor="fuse: true" scale="1.3 1.3 1.3"
          animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1.3 1.3 1.3; dur: 150"
          animation__fusing="property: fusing; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1500"
          event-set__1="_event: mouseenter; color: #549ad5"
          event-set__2="_event: mouseleave; color: #ededed"
          raycaster="far: 20; interval: 1000; objects: .clickable"></a-cursor>
        </a-entity>
      </a-entity>


  <!--pop_up_icon-->
    <a-entity data-array-link-id="rot" data-is-toggle-receiver-for="rot1" visible="true">
      <a-image src="https://binghan07.github.io/test_vr/icon.png" data-is-button-for="rotpoi" data-array-link-id="rot" data-array="room" data-poi-array="rot" data-is-toggle-button-for="rot1" scale="7 7 7" position="-32 20 3" opacity="1" rotation="30.66 90 0"> </a-image>

        <a-image src="https://binghan07.github.io/test_vr/icon.png" data-is-button-for="rotpoi1" data-array-link-id="rot" data-array="room" data-poi-array="rot" data-is-toggle-button-for="rot1" scale="2.3 2.3 2.3" position="0 12 -1" opacity="1" rotation="90 90 0"> </a-image>

         <a-image src="https://binghan07.github.io/test_vr/icon.png" data-is-button-for="rotpoi2" data-array-link-id="rot" data-array="room" data-poi-array="rot" data-is-toggle-button-for="rot1" scale="3 3 3" position="9.5 9 10" opacity="1" rotation="0 -135 0"> </a-image>

          <a-image src="https://binghan07.github.io/test_vr/icon.png" data-is-button-for="rotpoi3" data-array-link-id="rot" data-array="room" data-poi-array="rot" data-is-toggle-button-for="rot1" scale="12 12 12" position="-31.76 54.72 -18.08" opacity="1" rotation="28.88 57.84 0"> </a-image>
    </a-entity>

    

<!--pop_up -->
    <a-entity data-is-receiver-for="rotpoi" data-array-poi-link-id="panelhide" data-poi-array="poiarray" visible="false">
      <a-image src="https://binghan07.github.io/test_vr/pop_bg.png" position="-61.70 40 -4" width="48" height="24" scale="2 2 2" rotation="35 90 0"></a-image>
        <a-image data-is-button-for="rotpoi" data-is-toggle-button-for="rot1" src="https://binghan07.github.io/test_vr/false.png"  position="-49.06 53.56 -44.60" width=".4" height=".4" scale="16 16 16" rotation="35 90 0"></a-image>
    </a-entity>

    <a-entity data-is-receiver-for="rotpoi1" data-array-poi-link-id="panelhide" data-poi-array="poiarray" visible="false">
      <a-image src="https://binghan07.github.io/test_vr/pop_bg.png" position="0 19 -10" width="10" height="5" scale="2.7 2.7 2.7" rotation="65 0 0"></a-image>
        <a-image data-is-button-for="rotpoi1" data-is-toggle-button-for="rot1" src="https://binghan07.github.io/test_vr/false.png"  position="10.54 19 -5" width="1.5" height="1.5" scale="1.5 1.5 1.5" rotation="65 0 0"></a-image>
    </a-entity>

     <a-entity data-is-receiver-for="rotpoi2" data-array-poi-link-id="panelhide" data-poi-array="poiarray" visible="false">
      <a-image src="https://binghan07.github.io/test_vr/pop_bg.png" position="14 9 14" width="10" height="5" scale="2.7 2.7 2.7" rotation="11.68 -135 0"></a-image>
        <a-image data-is-button-for="rotpoi2" data-is-toggle-button-for="rot1" src="https://binghan07.github.io/test_vr/false.png"  position="5.08 13.60 21.03" width="4" height="4" scale=".8 .8 .8" rotation="-7.92 45.48 0"></a-image>
    </a-entity>

      <a-entity data-is-receiver-for="rotpoi3" data-array-poi-link-id="panelhide" data-poi-array="poiarray" visible="false">
      <a-image src="https://binghan07.github.io/test_vr/pop_bg.png" position="-43.88 62.05 -25.42" width="10" height="5" scale="7.5 7.5 7.5" rotation="35.04 66.20 0"></a-image>
        <a-image data-is-button-for="rotpoi3" data-is-toggle-button-for="rot1" src="https://binghan07.github.io/test_vr/false.png"  position="-24.06 72.36 -50.97" width="4" height="4" scale="2 2 1" rotation="35.96 66.54 0"></a-image>
    </a-entity>
  </a-scene>

  <script type="text/javascript">
  //POPUP
  $(function(){
      $('[data-is-button-for]').click(function(){
          var receiver = $('[data-is-receiver-for="'+$(this).attr('data-is-button-for')+'"]');
          if(receiver.attr('visible') == true) {
              console.log("hide");
              receiver.attr('visible', false);
          }else{
              console.log("show");
              receiver.attr('visible', true);
          }
      });
  });
  //POPUP 關閉
  $(function(){
      $('[data-is-toggle-button-for]').click(function(){
          var receiver = $('[data-is-toggle-receiver-for="'+$(this).attr('data-is-toggle-button-for')+'"]');
          if(receiver.attr('visible') == true) {
              console.log("hide");
              receiver.attr('visible', false);
          }else{
              console.log("show");
              receiver.attr('visible', true);
          }
      });
  });

  $(function(){
      $('[data-array-link]').click(function() {
          var link = $(this);
          var linkWindow = $('[data-array-link-id="'+$(this).attr('data-array-link')+'"]');
          $( '[data-array="'+linkWindow.attr('data-array')+'"]').each(function(index, object) {
              $(object).attr('visible', false);
          });
          console.log('got here at least');
          linkWindow.attr('visible', true);
      });
  });

  $(function(){
      $('[data-is-room-button-for]').click(function(){
          var receiver = $('[data-is-room-receiver-for="'+$(this).attr('data-is-room-button-for')+'"]');
          if(receiver.attr('visible') == true) {
              console.log("hide");
              receiver.attr('visible', false);
          }else{
              console.log("show");
              receiver.attr('visible', true);
          }
      });
  });

  $(function(){
      $('[data-array-poi-link]').click(function() {
          var link = $(this);
          var linkWindow = $('[data-array-poi-link-id="'+$(this).attr('data-array-poi-link')+'"]');
          $( '[data-poi-array="'+linkWindow.attr('data-poi-array')+'"]').each(function(index, object) {
              $(object).attr('visible', false);
          });
          console.log('poi visiblity array');
      });
  });
  </script>  
  </body>
</html>
